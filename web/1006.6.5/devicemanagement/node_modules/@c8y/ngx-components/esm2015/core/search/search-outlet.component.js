import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { sortBy } from 'lodash';
import { AlertService } from '../alert/alert.service';
let SearchOutletComponent = class SearchOutletComponent {
    constructor(alertService) {
        this.alertService = alertService;
        this.search = [];
    }
    openSearch() {
        setTimeout(() => this.focusInputBox(), 100);
    }
    getByPriority() {
        return sortBy(this.search, this.byPriority);
    }
    closeDropdown(dropdown) {
        dropdown.hide();
    }
    verifyNotEmpty(term) {
        if (!term || term === '') {
            this.alertService.add({ text: 'Type something to execute a search.', type: 'warning' });
        }
    }
    byPriority(item) {
        return -item.priority;
    }
    focusInputBox() {
        const elementToFocus = document.querySelector('#search-header-menu input');
        if (elementToFocus) {
            elementToFocus.focus();
        }
    }
};
SearchOutletComponent.ctorParameters = () => [
    { type: AlertService }
];
tslib_1.__decorate([
    Input()
], SearchOutletComponent.prototype, "search", void 0);
SearchOutletComponent = tslib_1.__decorate([
    Component({
        selector: 'c8y-search-outlet',
        template: "<ng-container *ngIf=\"search\">\n  <div class=\"dropdown\" dropdown #dropdown=\"bs-dropdown\" *ngFor=\"let item of getByPriority()\">\n    <button\n      title=\"{{ 'Search' | translate }}\"\n      type=\"button\"\n      class=\"main-header-button dropdown-toggle c8y-dropdown\"\n      (click)=\"openSearch()\"\n      dropdownToggle\n    >\n      <i [c8yIcon]=\"item.icon\" class=\"fa-2x\"></i>\n    </button>\n\n    <div\n      id=\"search-header-menu\"\n      class=\"search-header-menu dropdown-menu dropdown-menu-center\"\n      *dropdownMenu\n    >\n      <form\n        (ngSubmit)=\"verifyNotEmpty(item.term); item.onSearch(); closeDropdown(dropdown)\"\n        novalidate\n        #searchForm=\"ngForm\"\n      >\n        <div class=\"input-group input-group-search\" *ngIf=\"!item.template\">\n          <input\n            type=\"search\"\n            class=\"form-control input-lg\"\n            required=\"required\"\n            placeholder=\"Search for groups or assets\u2026\"\n            (click)=\"$event.stopPropagation()\"\n            [(ngModel)]=\"item.term\"\n            name=\"searchTerm\"\n          />\n\n          <span class=\"input-group-btn\">\n            <button type=\"submit\" class=\"btn btn-link\" (click)=\"$event.stopPropagation()\">\n              <i [c8yIcon]=\"'arrow-right'\"></i>\n            </button>\n          </span>\n        </div>\n\n        <ng-container *c8yOutlet=\"item.template\"></ng-container>\n      </form>\n    </div>\n  </div>\n</ng-container>\n"
    })
], SearchOutletComponent);
export { SearchOutletComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLW91dGxldC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYzh5L25neC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsiY29yZS9zZWFyY2gvc2VhcmNoLW91dGxldC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUF5QixNQUFNLGVBQWUsQ0FBQztBQUV4RSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ2hDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQU90RCxJQUFhLHFCQUFxQixHQUFsQyxNQUFhLHFCQUFxQjtJQUdoQyxZQUFvQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUZyQyxXQUFNLEdBQWEsRUFBRSxDQUFDO0lBRWtCLENBQUM7SUFFbEQsVUFBVTtRQUNSLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELGFBQWE7UUFDWCxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsYUFBYSxDQUFDLFFBQVE7UUFDcEIsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxjQUFjLENBQUMsSUFBSTtRQUNqQixJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxFQUFFLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUscUNBQXFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7U0FDekY7SUFDSCxDQUFDO0lBRU8sVUFBVSxDQUFDLElBQUk7UUFDckIsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDeEIsQ0FBQztJQUVPLGFBQWE7UUFDbkIsTUFBTSxjQUFjLEdBQVEsUUFBUSxDQUFDLGFBQWEsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQ2hGLElBQUksY0FBYyxFQUFFO1lBQ2xCLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUN4QjtJQUNILENBQUM7Q0FDRixDQUFBOztZQTlCbUMsWUFBWTs7QUFGckM7SUFBUixLQUFLLEVBQUU7cURBQXVCO0FBRHBCLHFCQUFxQjtJQUpqQyxTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsbUJBQW1CO1FBQzdCLDYrQ0FBNkM7S0FDOUMsQ0FBQztHQUNXLHFCQUFxQixDQWlDakM7U0FqQ1kscUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZWFyY2ggfSBmcm9tICcuL3NlYXJjaC5tb2RlbCc7XG5pbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQWxlcnRTZXJ2aWNlIH0gZnJvbSAnLi4vYWxlcnQvYWxlcnQuc2VydmljZSc7XG5pbXBvcnQgeyBBbGVydCB9IGZyb20gJy4uL2FsZXJ0L2FsZXJ0Lm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LXNlYXJjaC1vdXRsZXQnLFxuICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLW91dGxldC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoT3V0bGV0Q29tcG9uZW50IHtcbiAgQElucHV0KCkgc2VhcmNoOiBTZWFyY2hbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWxlcnRTZXJ2aWNlOiBBbGVydFNlcnZpY2UpIHt9XG5cbiAgb3BlblNlYXJjaCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZm9jdXNJbnB1dEJveCgpLCAxMDApO1xuICB9XG5cbiAgZ2V0QnlQcmlvcml0eSgpIHtcbiAgICByZXR1cm4gc29ydEJ5KHRoaXMuc2VhcmNoLCB0aGlzLmJ5UHJpb3JpdHkpO1xuICB9XG5cbiAgY2xvc2VEcm9wZG93bihkcm9wZG93bikge1xuICAgIGRyb3Bkb3duLmhpZGUoKTtcbiAgfVxuXG4gIHZlcmlmeU5vdEVtcHR5KHRlcm0pIHtcbiAgICBpZiAoIXRlcm0gfHwgdGVybSA9PT0gJycpIHtcbiAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLmFkZCh7IHRleHQ6ICdUeXBlIHNvbWV0aGluZyB0byBleGVjdXRlIGEgc2VhcmNoLicsIHR5cGU6ICd3YXJuaW5nJyB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ5UHJpb3JpdHkoaXRlbSkge1xuICAgIHJldHVybiAtaXRlbS5wcmlvcml0eTtcbiAgfVxuXG4gIHByaXZhdGUgZm9jdXNJbnB1dEJveCgpIHtcbiAgICBjb25zdCBlbGVtZW50VG9Gb2N1czogYW55ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYXJjaC1oZWFkZXItbWVudSBpbnB1dCcpO1xuICAgIGlmIChlbGVtZW50VG9Gb2N1cykge1xuICAgICAgZWxlbWVudFRvRm9jdXMuZm9jdXMoKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==