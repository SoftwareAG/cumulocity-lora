"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){function e(n){return{dateToString:function(e){return e&&moment(e).format("YYYY-MM-DD")},stringToDate:function(e){return e&&moment(e).toDate()},setLocal:function(e,t){n.localStorage.setItem(e,JSON.stringify(t))},getLocal:function(e){try{return JSON.parse(n.localStorage.getItem(e))}catch(e){if(e instanceof SyntaxError)return;throw e}},log:function(e){return n.console.log(e),e},enhanceWithKeysUtil:function(e){var t=e.target,n=e.reservedKeys,r=void 0===n?[]:n,o=e.standardKeys,c=void 0===o?{}:o;return _objectSpread({},t,{reservedKeys:r,standardKeys:c,getKeys:i,getStandardKeys:a,getNonStandardKeys:function(e){return _.difference(i(e),_.keys(a(e)))}});function i(e){return _(angular.copy(e)).keys().filter(function(e){return!_.includes(r,e)}).value()}function a(e){var n=angular.copy(e);return _.pickBy(c,function(e,t){return _.has(n,t)})}},enhanceWithLatestFactoryUtil:function(e,a){return _objectSpread({},e,{latest:function(c){if(!_.isFunction(c))throw new TypeError("Argument needs to be a function");var i=-1;return function(){for(var t=i+=1,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=c.apply(this,n);if(!_.isFunction(o.then))throw new TypeError("Function must return a promise");return o=o.then(function(e){return t!==i?a.reject("Promise is cancelled by a more recent one."):e},function(e){return t!==i?a.reject("Promise is cancelled by a more recent one."):a.reject(e)})}}})}}}e.$inject=["$window"],angular.module("c8y.core").factory("c8yUtil",e)}();