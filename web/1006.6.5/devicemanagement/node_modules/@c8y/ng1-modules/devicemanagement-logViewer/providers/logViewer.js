"use strict";!function(){function e(n,i){var o,a,u,c;function r(e,t,n){var r=e.deviceId;return t.detailCached(r).then(n.getResData).then(function(e){return t.supportsOperation(e,"c8y_LogfileRequest")})}function s(e){var t;if(e&&e.c8y_LogfileRequest&&e.c8y_LogfileRequest.file){if(t=e.c8y_LogfileRequest.file,c.isEventBinary(t)){var n=c.getEventIdFromUrl(t);return n?c.downloadAsText(n):o.get(t)}var r=u.getIdFromUrl(t);return r?u.downloadAsText(r):o.get(t)}return a.when({data:i("Loading logfiles...")})}return{$get:["$http","$q","c8yBinary","c8yEvents",function(e,t,n,r){return o=e,a=t,u=n,c=r,{getLogfile:s}}],when:function(e,t){n.when(e,_.assign(t,{showIf:["$routeParams","c8yDevices","c8yBase",r]}))},showIf:r}}e.$inject=["c8yViewsProvider","gettext"],angular.module("c8y.logViewer").provider("logViewer",e)}();