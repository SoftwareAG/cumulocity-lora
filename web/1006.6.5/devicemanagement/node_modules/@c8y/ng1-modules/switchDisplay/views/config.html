<div class="switchDisplayConfig" ng-controller="switchDisplayConfig">
  <table class="table" ng-repeat-start="(index, switch) in switchesTemp">
    <tr>
      <td colspan="2" class="labels"><label translate>Managed object property</label></td>
      <td colspan="2" class="labels"><label translate>Data point name</label></td>
    </tr>
    <tr>
      <td colspan="2" class="inputs">
        <input placeholder="c8y_Relay.relayState" ng-model="switch.property" />
      </td>
      <td colspan="2" class="inputs"><input ng-model="switch.name" /></td>
    </tr>
    <tr>
      <td class="labels"><label translate>Value for active</label></td>
      <td class="labels"><label translate>Label for active</label></td>
      <td class="labels"><label translate>Value for inactive</label></td>
      <td class="labels"><label translate>Label for inactive</label></td>
    </tr>
    <tr>
      <td class="inputs"><input placeholder="OPEN" ng-model="switch.activeValue" /></td>
      <td class="inputs"><input ng-model="switch.activeLabel" /></td>
      <td class="inputs"><input placeholder="CLOSED" ng-model="switch.inactiveValue" /></td>
      <td class="inputs"><input ng-model="switch.inactiveLabel" /></td>
    </tr>
  </table>

  <div class="buttonsExistingSwitches actionButtons" ng-if="!switch.newSwitch">
    <button
      title="{{ 'Update configuration' | translate }}"
      class="btn btn-primary"
      ng-click="saveSwitch(index)"
      translate
    >
      Update configuration
    </button>
    <button
      title="{{ 'Delete configuration' | translate }}"
      class="btn btn-link"
      ng-click="deleteSwitch(index)"
    >
      <i class="icon" c8y-icon="times"></i>
      <span translate>Delete configuration</span>
    </button>
  </div>
  <div class="actionButtons" ng-repeat-end ng-if="switch.newSwitch">
    <button
      title="{{ 'Save configuration' | translate }}"
      class="btn btn-primary"
      ng-click="saveSwitch(index)"
      translate
    >
      Save configuration
    </button>
  </div>
  <div ng-if="!(switchesTemp.length && switchesTemp[switchesTemp.length-1].newSwitch)">
    <button
      title="{{ 'Add configuration' | translate }}"
      class="btn btn-default"
      ng-click="addSwitch(index)"
    >
      <i class="icon" c8y-icon="plus-circle"></i>
      <span translate>Add configuration</span>
    </button>
  </div>

  <input name="switchConfig" ng-model="config.switches.length" type="hidden" pattern="[^0]" />
  <p ng-if="config.switches.length === 0" style="margin-top: 20px;" class="has-error">
    <span style="display: inline-block;" class="help-block">
      <i c8y-icon="exclamation-triangle"></i>
      <span translate>
        At least one configuration needs to be added.
      </span>
    </span>
  </p>
</div>
