"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){function e(n,r,e){var t=r.url("service/sigfox-agent"),c={contracts:{url:"".concat(t,"/contract"),method:"GET",silentError:!0},newDeviceRequest:{url:"".concat(t,"/newDeviceRequest"),method:"POST",silentError:!0}};return{getContracts:function(){var e=_objectSpread({},c.contracts);return n(e).then(r.getResData).then(o)},getDeviceTypes:function(){return e.getAvailableDeviceTypes({type:"c8y_SigfoxDeviceType"})},createNewDeviceRequest:function(e){var t=_objectSpread({},c.newDeviceRequest,{data:e});return n(t).then(r.getResData)}};function o(e){return _.filter(e,function(e){return(e.activationEndTime>Date.now()||0===e.activationEndTime)&&(e.maxTokens>e.tokensInUse||0===e.maxTokens)})}}e.$inject=["$http","c8yBase","c8yDeviceDatabase"],angular.module("c8y.deviceRegistrationSigfox").factory("deviceRegistrationSigfoxProviderService",e)}();