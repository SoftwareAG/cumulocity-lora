<div ng-controller="DataPointWidgetConfigCtrl" ng-init="disableLocalStorage = true">
  <div class="data-point-explorer" ng-controller="c8yDataPointExplorerCtrl">
    <div class="pull-right" style="margin-bottom: 5px;">
      <c8y-realtime-button
        class="top-right-control"
        channel="{{channel}}"
        state="data.realtime"
        on-data="onData($data)"
      >
      </c8y-realtime-button>
      <c8y-realtime-button
        ng-show="false"
        channel="{{alarmsChannel}}"
        state="data.realtime"
        on-data="onAlarm($data)"
        on-data-update="onAlarm($data)"
      >
      </c8y-realtime-button>
      <c8y-realtime-button
        ng-show="false"
        channel="{{eventsChannel}}"
        state="data.realtime"
        on-data="onEvent($data)"
      >
      </c8y-realtime-button>
      <c8y-aggregation class="top-right-control" date-from="data.dateFrom" date-to="data.dateTo" aggregation="data.aggregation" realtime="data.realtime" auto="true">
      </c8y-aggregation>
      <c8y-interval class="top-right-control" date-from="data.dateFrom" date-to="data.dateTo" interval="data.interval">
      </c8y-interval>
    </div>
    <div class="c8yGraphFill" style="height:340px; clear: both;">
      <c8y-chart
        datapoints="data.graphDataPoints"
        date-from="data.dateFrom"
        date-to="data.dateTo"
        realtime="data.realtime"
        aggregation="data.aggregation"
        show-time="true"
        on-data="onData"
        on-update-dates="onUpdateDates($dateFrom, $dateTo)"
        on-update-displayed-dates="onUpdateDisplayedDates($dateFrom, $dateTo)"
        on-box-changed="onBoxChanged(box)"
      >
      </c8y-chart>
    </div>
    <c8y-alarms-events-timelines-chart
      alarms-events-configs="data.graphAlarmsEventsConfigs"
      date-from="data.displayedDateFrom"
      date-to="data.displayedDateTo"
      on-update-dates="onUpdateDates($dateFrom, $dateTo)"
      realtime="data.realtime"
      on-realtime-alarm-fn="onRealtimeAlarmFn(onRealtimeAlarm)"
      on-realtime-event-fn="onRealtimeEventFn(onRealtimeEvent)"
      chart-box="chartBox"
    >
    </c8y-alarms-events-timelines-chart>
    <c8y-data-point-list datapoints="data.datapoints" allow-adding-data-points-from-context-mo-only="dashboard.deviceType && dashboard.deviceTypeValue" dont-save="true"></c8y-data-point-list>
    <c8y-alarms-events-timelines-config configs="data.alarmsEventsConfigs" allow-alarms-events-from-context-mo-only="dashboard.deviceType && dashboard.deviceTypeValue"></c8y-alarms-events-timelines-config>
    <label class="checkbox-inline c8y-checkbox" style="margin-top: 20px">
      <input type="checkbox" ng-model="data.displayDateSelection">
      <span></span>
      <translate>Show date selection</translate>
    </label>
  </div>
</div>
