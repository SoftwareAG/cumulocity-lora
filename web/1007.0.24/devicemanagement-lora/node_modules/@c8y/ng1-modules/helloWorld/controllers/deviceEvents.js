"use strict";angular.module("c8y.parts.helloWorld").controller("deviceEventsCtrl",["$scope","$routeParams","c8yNotifications","c8yAlert","c8yCepModule","gettext",function(t,e,n,s,o,c){var i,a=e.deviceId,r="/events/".concat(a),u={name:"c8yui_realtime_device_events",body:'insert into\n  SendNotification\nselect\n  e.event as payload,\n  "events/" || e.event.source.value as channelName\nfrom\n  EventCreated e;',status:"DEPLOYED"};function l(e,n){for(t.events.push(n);100<t.events.length;)t.events.shift()}t.events=[],t.$on("$destroy",function(){i&&i.unsubscribe&&i.unsubscribe()}),t.getEventText=function(e){return e.data.text||"-- no text message --"},i||o.createOrDeploy(u).then(n.configure).then(angular.bind({},n.subscribe,r)).then(function(e){s.success(c("Connected - waiting for incoming events...")),(i=e).$on("message",l)})}]);