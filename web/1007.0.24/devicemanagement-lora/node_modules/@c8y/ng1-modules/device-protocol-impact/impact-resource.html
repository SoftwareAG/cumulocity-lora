<div class="list-group-item collapsible" ng-class="{'expanded': vm.isDetailOpen}">
  <div class="flex-row" ng-click="vm.toggleDetail()">
    <div class="list-item-actions">
      <button
        type="button"
        title="{{ 'Expand' | translate }}"
        class="collapse-btn"
        ng-class="{active: vm.isDetailOpen}"
      >
        <i c8y-icon="chevron-down"></i>
      </button>
    </div>

    <div class="list-item-icon">
      <i c8y-icon="c8y-data-points"></i>
    </div>

    <div class="list-item-body right-m">
      <div class="row flex-row">
        <div class="col-xs-7">
          <small class="text-muted">{{ vm.serverResource.id }}</small>
          {{ vm.serverResource.name }}
        </div>
        <div class="col-xs-5">
          <div class="list-functionalities">
            <label class="small hidden-xs" translate>Functionalities</label>&nbsp;
            <c8y-object-mapping-status-icons
              mapping="vm.serverMapping"
            ></c8y-object-mapping-status-icons>
          </div>
        </div>
      </div>
    </div>

    <div class="showOnHover right-m">
      <a
        href=""
        style="text-decoration:none;padding-top:5px"
        class="text-danger"
        c8y-icon="minus-circle"
        ng-click="$event.stopPropagation();vm.remove()"
      >
      </a>
    </div>
  </div>

  <div class="detail top-m-sm" uib-collapse="!vm.isDetailOpen">
    <form name="wrapperForm" novalidate>
      <div class="form tight-grid" ng-form="resourceForm">
        <div class="col-md-4">
          <div class="form-group form-group-sm">
            <label translate>Id</label>
            <input
              name="id"
              class="form-control"
              ng-model="vm.resource.id"
              placeholder="{{ 'e.g.' | translate }} 12"
              required
              ng-maxlength="100"
            />
            <c8y-error-feedback field="resourceForm.id"></c8y-error-feedback>
          </div>
        </div>
        <div class="col-md-8">
          <div class="form-group form-group-sm">
            <label translate>Name</label>
            <input
              name="name"
              class="form-control"
              ng-model="vm.resource.name"
              placeholder="{{ 'e.g. My resource' | translate }}"
              required
              ng-maxlength="200"
            />
            <c8y-error-feedback field="resourceForm.name"></c8y-error-feedback>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group form-group-sm">
            <label translate>Type</label>
            <div class="c8y-select-wrapper">
              <select
                required
                name="type"
                class="form-control"
                ng-model="vm.resource.type"
                ng-options="dataType as (dataType | translate) for dataType in vm.dataTypes"
              >
              </select>
              <span></span>
            </div>
            <c8y-error-feedback field="resourceForm.type"></c8y-error-feedback>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group form-group-sm">
            <label translate>Unit</label>
            <input name="unit" class="form-control" ng-model="vm.resource.unit" ng-maxlength="50" />
            <c8y-error-feedback field="resourceForm.unit"></c8y-error-feedback>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group form-group-sm">
            <label translate>Instance type</label>
            <div>
              <label class="c8y-radio radio-inline">
                <input
                  type="radio"
                  name="multiple"
                  ng-model="vm.resource.multiple"
                  ng-value="false"
                />
                <span></span> {{ 'Single' | translate }}
              </label>
              <label class="c8y-radio radio-inline">
                <input
                  type="radio"
                  name="multiple"
                  ng-model="vm.resource.multiple"
                  ng-value="true"
                />
                <span></span> {{ 'Multiple' | translate }}
              </label>
            </div>
            <c8y-error-feedback field="resourceForm.multiple"></c8y-error-feedback>
          </div>
        </div>
        <div class="col-md-8">
          <div class="form-group form-group-sm">
            <label translate>Description</label>
            <textarea
              class="form-control"
              name="description"
              ng-model="vm.resource.description"
            ></textarea>
            <c8y-error-feedback field="resourceForm.description"></c8y-error-feedback>
          </div>
        </div>
      </div>

      <c8y-object-mapping
        mapping="vm.mapping"
        auto-observe-params="false"
        custom-actions="vm.customActions"
      >
      </c8y-object-mapping>

      <button
        title="{{ 'Cancel' | translate }}"
        class="btn btn-default top-m bottom-m"
        style="min-width: 100px;"
        ng-click="vm.cancel()"
        translate
      >
        Cancel
      </button>
      <button
        title="{{ 'Save' | translate }}"
        class="btn btn-primary top-m bottom-m"
        style="min-width: 100px;"
        ng-click="vm.save()"
        ng-disabled="wrapperForm.$invalid || wrapperForm.$pristine"
        translate
      >
        Save
      </button>
    </form>
  </div>
</div>
