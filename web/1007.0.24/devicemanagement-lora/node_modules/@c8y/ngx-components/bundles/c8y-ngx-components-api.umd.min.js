!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@c8y/client"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@c8y/ngx-components/api",["exports","@angular/core","@c8y/client","rxjs","rxjs/operators"],t):t(((e=e||self).c8y=e.c8y||{},e.c8y["ngx-components"]=e.c8y["ngx-components"]||{},e.c8y["ngx-components"].api={}),e.ng.core,e.client,e.rxjs,e.rxjs.operators)}(this,(function(e,t,r,n,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t,r,n){var i,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(c=(o<3?i(c):o>3?i(t,r,c):i(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c}function u(e,t,r,n){return new(r||(r=Promise))((function(i,o){function c(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,u)}a((n=n.apply(e,t||[])).next())}))}function a(e,t){var r,n,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(i=c.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var s=function(){function e(e){this.client=e,this.callsSubject=new n.Subject,this.calls=this.callsSubject.asObservable(),this.hookIntoClientFetch()}return e.prototype.hookResponse=function(e){return this.callsSubject.pipe(i.filter((function(e){return"finish"===e.phase})),i.filter(e))},e.prototype.hookRequest=function(e){return this.callsSubject.pipe(i.filter((function(e){return"start"===e.phase})),i.filter(e))},e.prototype.onFinish=function(e){return u(this,void 0,void 0,(function(){return a(this,(function(t){return this.callsSubject.next(o({phase:"finish"},e)),[2]}))}))},e.prototype.onStart=function(e){this.callsSubject.next(o({phase:"start"},e))},e.prototype.resolveData=function(e){return u(this,void 0,void 0,(function(){var t,r,n;return a(this,(function(i){return t=e.response,r=e.method,"data"in t?[2,Promise.resolve({data:t.data,method:r})]:(n=function(e){return{data:e,method:r}},[2,t.clone().json().then(n,n)])}))}))},e.prototype.hookIntoClientFetch=function(){var e=this,t=this.client.fetch.bind(this.client);this.client.fetch=function(r,n){return void 0===n&&(n={method:"GET"}),u(e,void 0,void 0,(function(){var e,i,o=this;return a(this,(function(c){return e=n.method,this.onStart({options:n,method:e,url:r}),i=t(r,n),"function"==typeof n.responseInterceptor&&(i=i.then(n.responseInterceptor)),i.then((function(t){return o.onFinish({response:t,url:r,options:n,method:e})}),(function(t){return o.onFinish({response:t,url:r,options:n,method:e})})),[2,i]}))}))}},e.ctorParameters=function(){return[{type:r.FetchClient}]},e=c([t.Injectable()],e)}(),l=Object.freeze({__proto__:null,FetchClient:r.FetchClient,BasicAuth:r.BasicAuth,CookieAuth:r.CookieAuth,Realtime:r.Realtime,EventBinaryService:r.EventBinaryService,EventService:r.EventService,InventoryService:r.InventoryService,MeasurementService:r.MeasurementService,AlarmService:r.AlarmService,OperationBulkService:r.OperationBulkService,OperationService:r.OperationService,ApplicationService:r.ApplicationService,UserService:r.UserService,TenantService:r.TenantService,SystemOptionsService:r.SystemOptionsService,TenantOptionsService:r.TenantOptionsService,TenantSecurityOptionsService:r.TenantSecurityOptionsService,TenantLoginOptionsService:r.TenantLoginOptionsService,AuditService:r.AuditService,InventoryRoleService:r.InventoryRoleService,InventoryBinaryService:r.InventoryBinaryService,DeviceRegistrationService:r.DeviceRegistrationService,DeviceRegistrationBulkService:r.DeviceRegistrationBulkService,UserRoleService:r.UserRoleService,UserGroupService:r.UserGroupService,IdentityService:r.IdentityService,TrustedCertificateService:r.TrustedCertificateService});var v=Object.keys(l).map((function(e){return t=l[e],n=[r.FetchClient,r.Realtime],t===r.FetchClient&&(n=[r.CookieAuth]),t!==r.BasicAuth&&t!==r.CookieAuth||(n=[]),t===r.Realtime&&(n=[r.FetchClient]),{provide:t,useClass:t,deps:n};var t,n})).concat([{provide:s,useClass:s,deps:[r.FetchClient]}]),f=function(){function e(){}var r;return r=e,e.providers=function(){return v},e.forRoot=function(){return{ngModule:r,providers:v}},e=r=c([t.NgModule()],e)}();Object.defineProperty(e,"AlarmService",{enumerable:!0,get:function(){return r.AlarmService}}),Object.defineProperty(e,"ApplicationService",{enumerable:!0,get:function(){return r.ApplicationService}}),Object.defineProperty(e,"AuditService",{enumerable:!0,get:function(){return r.AuditService}}),Object.defineProperty(e,"BasicAuth",{enumerable:!0,get:function(){return r.BasicAuth}}),Object.defineProperty(e,"CookieAuth",{enumerable:!0,get:function(){return r.CookieAuth}}),Object.defineProperty(e,"DeviceRegistrationBulkService",{enumerable:!0,get:function(){return r.DeviceRegistrationBulkService}}),Object.defineProperty(e,"DeviceRegistrationService",{enumerable:!0,get:function(){return r.DeviceRegistrationService}}),Object.defineProperty(e,"EventBinaryService",{enumerable:!0,get:function(){return r.EventBinaryService}}),Object.defineProperty(e,"EventService",{enumerable:!0,get:function(){return r.EventService}}),Object.defineProperty(e,"FetchClient",{enumerable:!0,get:function(){return r.FetchClient}}),Object.defineProperty(e,"IdentityService",{enumerable:!0,get:function(){return r.IdentityService}}),Object.defineProperty(e,"InventoryBinaryService",{enumerable:!0,get:function(){return r.InventoryBinaryService}}),Object.defineProperty(e,"InventoryRoleService",{enumerable:!0,get:function(){return r.InventoryRoleService}}),Object.defineProperty(e,"InventoryService",{enumerable:!0,get:function(){return r.InventoryService}}),Object.defineProperty(e,"MeasurementService",{enumerable:!0,get:function(){return r.MeasurementService}}),Object.defineProperty(e,"OperationBulkService",{enumerable:!0,get:function(){return r.OperationBulkService}}),Object.defineProperty(e,"OperationService",{enumerable:!0,get:function(){return r.OperationService}}),Object.defineProperty(e,"Realtime",{enumerable:!0,get:function(){return r.Realtime}}),Object.defineProperty(e,"SystemOptionsService",{enumerable:!0,get:function(){return r.SystemOptionsService}}),Object.defineProperty(e,"TenantLoginOptionsService",{enumerable:!0,get:function(){return r.TenantLoginOptionsService}}),Object.defineProperty(e,"TenantOptionsService",{enumerable:!0,get:function(){return r.TenantOptionsService}}),Object.defineProperty(e,"TenantSecurityOptionsService",{enumerable:!0,get:function(){return r.TenantSecurityOptionsService}}),Object.defineProperty(e,"TenantService",{enumerable:!0,get:function(){return r.TenantService}}),Object.defineProperty(e,"TrustedCertificateService",{enumerable:!0,get:function(){return r.TrustedCertificateService}}),Object.defineProperty(e,"UserGroupService",{enumerable:!0,get:function(){return r.UserGroupService}}),Object.defineProperty(e,"UserRoleService",{enumerable:!0,get:function(){return r.UserRoleService}}),Object.defineProperty(e,"UserService",{enumerable:!0,get:function(){return r.UserService}}),e.ApiService=s,e.DataModule=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=c8y-ngx-components-api.umd.min.js.map