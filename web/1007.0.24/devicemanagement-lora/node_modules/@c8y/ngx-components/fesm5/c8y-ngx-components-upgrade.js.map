{"version":3,"file":"c8y-ngx-components-upgrade.js","sources":["ng://@c8y/ngx-components/upgrade/ng1/views.provider.ts","ng://@c8y/ngx-components/upgrade/bridge.service.ts","ng://@c8y/ngx-components/upgrade/action-bar.factory.ts","ng://@c8y/ngx-components/upgrade/action.factory.ts","ng://@c8y/ngx-components/upgrade/breadcrumb.factory.ts","ng://@c8y/ngx-components/upgrade/nodes.factory.ts","ng://@c8y/ngx-components/upgrade/search.factory.ts","ng://@c8y/ngx-components/upgrade/tabs.factory.ts","ng://@c8y/ngx-components/upgrade/docs.factory.ts","ng://@c8y/ngx-components/upgrade/upgrade.module.ts","ng://@c8y/ngx-components/upgrade/dashboard/dashboard-bridge.service.ts","ng://@c8y/ngx-components/upgrade/dashboard/widget.component.ts","ng://@c8y/ngx-components/upgrade/dashboard/device-selector.component.ts","ng://@c8y/ngx-components/upgrade/dashboard/component.factory.ts","ng://@c8y/ngx-components/upgrade/dashboard/copy-action.component.ts","ng://@c8y/ngx-components/upgrade/dashboard/paste-action.component.ts","ng://@c8y/ngx-components/upgrade/dashboard/dashboard-actions.factory.ts","ng://@c8y/ngx-components/upgrade/dashboard/dashboard-upgrade.module.ts","ng://@c8y/ngx-components/upgrade/ng1/alert.decorator.ts","ng://@c8y/ngx-components/upgrade/ng1/downgraded.components.ts","ng://@c8y/ngx-components/upgrade/ng1/serverMessages.service.ts","ng://@c8y/ngx-components/upgrade/ng1/downgraded.services.ts","ng://@c8y/ngx-components/upgrade/ng1/gettextCatalog.decorator.ts","ng://@c8y/ngx-components/upgrade/ng1/groupsHierarchyNavigator.decorator.ts","ng://@c8y/ngx-components/upgrade/ng1/http.interceptor.ts","ng://@c8y/ngx-components/upgrade/ng1/navigator-node-root-legacy.ts","ng://@c8y/ngx-components/upgrade/ng1/navigator.provider.ts","ng://@c8y/ngx-components/upgrade/ng1/root.component.ts","ng://@c8y/ngx-components/upgrade/ng1/title.decorator.ts","ng://@c8y/ngx-components/upgrade/ng1/index.ts","ng://@c8y/ngx-components/upgrade/hybrid-app.module.ts","ng://@c8y/ngx-components/upgrade/upgrade.routes.ts","ng://@c8y/ngx-components/upgrade/c8y-ngx-components-upgrade.ts"],"sourcesContent":["import { startsWith, unary, map, find, forEach } from 'lodash-es';\nimport { ViewContext } from '@c8y/ngx-components';\nimport { ReplaySubject } from 'rxjs';\n\nexport enum ViewContextLegacyParameter {\n  Device = 'deviceId',\n  Group = 'groupId',\n  User = 'userId',\n  Application = 'applicationId',\n  SubscribedApplications = 'applicationId',\n  Tenant = 'tenantId'\n}\n\nfunction c8yViewsProvider($routeProvider, c8yTabsProvider, c8yPathUtils) {\n  'ngInject';\n\n  const viewMap = {};\n  const contextViews = new ReplaySubject();\n\n  return {\n    when,\n    $get() {\n      return {\n        contextViews,\n        when(path, cfg) {\n          return when(path, cfg, true);\n        },\n        getByPath,\n        prefixWithSlash\n      };\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name when\n   * @methodOf c8y.ui.provider:c8yViewsProvider\n   *\n   * @description\n   * Defines a view for given route.\n   * If multiple views are defined for a single route then there will be a separate tab for each view available when user visits that route.\n   *\n   * @param path Target route.\n   * @param cfg View configuration object with the following properties:\n   *\n   * - **name** - `string` - View's name (in case of multiple views at single route this will be displayed as tab's title).\n   * - **priority** - `integer` - View's priority (in case of multiple views at single route this will determine the position of view's tab in the tabs stack).\n   * - **icon** - `string` - Font Awesome icon name for the view (displayed on the tab's header).\n   * - **showIf** - `function` - Function returning boolean value indicating whether to show a tab for the view or not.\n   * - **templateUrl** - `string` - Path to the template to use for displaying the view.\n   *\n   * You can also provide other view options - the same as available for standard {@link https://docs.angularjs.org/api/ngRoute/provider/$routeProvider $routeProvider} in AngularJS.\n   *\n   * @example\n   * The following example demonstrates how to add a new view to device details route\n   * (which will be displayed as a tab if other views are assigned to the same route):\n   * <pre>\n   *   c8yViewsProvider.when('/device/:deviceId', {\n   *     name: 'Tracking',\n   *     templateUrl: ':::PLUGIN_PATH:::/views/index.html',\n   *     icon: 'crosshairs',\n   *     showIf: ['$routeParams', 'c8yDevices', function ($routeParams, c8yDevices) {\n   *       var deviceId = $routeParams.deviceId;\n   *       return c8yDevices.detailCached(deviceId).then(function (res) {\n   *         var device = res.data;\n   *         return device && (device.c8y_MotionTracking || device.c8y_Geofence);\n   *       });\n   *     }]\n   *   });\n   * </pre>\n   */\n  function when(path, cfg, runPhase) {\n    const newPath = prefixWithSlash(path);\n    cfg.resolve = cfg.resolve || {};\n    // eslint-disable-next-line no-underscore-dangle\n    cfg.resolve.__c8y_locales = [\n      'c8yLocales',\n      c8yLocales => {\n        return c8yLocales.initDone;\n      }\n    ];\n\n    let currentCfg = viewMap[newPath];\n    const originalPath = newPath;\n\n    if (!cfg.name) {\n      // console.warn('View name not defined');\n    }\n\n    if (!currentCfg) {\n      viewMap[newPath] = [];\n      currentCfg = viewMap[newPath];\n    }\n\n    const upgradedContext = Object.keys(ViewContext)\n      .map(key => ({\n        key,\n        isUpgrade:\n          prefixWithSlash(ViewContext[key].replace('id', ViewContextLegacyParameter[key])) === path\n      }))\n      .find(({ isUpgrade }) => isUpgrade);\n\n    if (upgradedContext) {\n      currentCfg.push(cfg);\n      cfg.path = newPath;\n\n      const p = c8yPathUtils.appendSegment(originalPath.replace(path, ''), cfg.name);\n      contextViews.next({\n        ...cfg,\n        path: cfg.name ? p.substring(1) : '',\n        contextKey: upgradedContext.key,\n        runPhase\n      });\n      cfg.showIf = undefined;\n      if (cfg.name) {\n        cfg.path = c8yPathUtils.appendSegment(originalPath, cfg.name);\n      }\n    } else {\n      if (currentCfg.length === 1) {\n        const [existingConfig] = currentCfg;\n        existingConfig.path = c8yPathUtils.appendSegment(originalPath, existingConfig.name);\n        existingConfig.tab = createTab(originalPath, existingConfig);\n        $routeProvider.when(existingConfig.path, existingConfig);\n      }\n\n      currentCfg.push(cfg);\n      cfg.path = newPath;\n\n      if (currentCfg.length > 1) {\n        cfg.path = c8yPathUtils.appendSegment(originalPath, cfg.name);\n        createTab(originalPath, cfg);\n\n        $routeProvider.when(prefixWithSlash(originalPath), {\n          resolveRedirectTo($route, $q, c8yUiUtil, c8yTabs, gettextCatalog) {\n            'ngInject';\n\n            const sortedCurrentCfg = c8yTabsProvider.sortTabsViews(currentCfg, gettextCatalog);\n            const params = $route.current.pathParams;\n\n            return $q\n              .all(map(sortedCurrentCfg, unary(c8yUiUtil.configureVisibility)))\n              .then(views => {\n                const first = find(views, 'show');\n                let url = first.path;\n                forEach(params, (val, key) => {\n                  url = url.replace(`:${key}`, val);\n                });\n                c8yTabs.redirectedViewPath = url;\n                return url;\n              });\n          }\n        });\n      }\n    }\n    return $routeProvider.when(prefixWithSlash(cfg.path), cfg);\n  }\n\n  function getByPath(path) {\n    return viewMap[prefixWithSlash(path)];\n  }\n\n  function createTab(path, cfg) {\n    c8yTabsProvider.addTab(path, cfg);\n  }\n\n  function prefixWithSlash(path) {\n    const prefix = startsWith(path, '/') ? '' : '/';\n    return prefix + path;\n  }\n}\n\nexport { c8yViewsProvider };\n","import {\n  Action,\n  ActionBarItem,\n  ActionService,\n  AppStateService,\n  Breadcrumb,\n  BreadcrumbItem,\n  EmptyComponent,\n  RouterService,\n  Search,\n  Tab,\n  ViewContext,\n  gettext,\n  DocLink\n} from '@c8y/ngx-components';\nimport {\n  BehaviorSubject,\n  Observable,\n  Subject,\n  combineLatest,\n  from,\n  fromEventPattern,\n  of\n} from 'rxjs';\nimport { debounceTime, filter, map, merge, skip, startWith, switchMap } from 'rxjs/operators';\n\nimport { ActivationEnd } from '@angular/router';\nimport { FetchClient } from '@c8y/client';\nimport { NgZone } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ViewContextLegacyParameter } from './ng1/views.provider';\n\nexport class BridgeService {\n  $routeChanges: Observable<any>;\n  $ng1RouteChangeSuccess: Observable<any>;\n  $ng1RouteChangeStart: Observable<any>;\n  $liveTabs: Subject<Tab[]> = new BehaviorSubject([]);\n  navigationNodes$: Observable<any>;\n  constructor(\n    public injector: any,\n    private appState: AppStateService,\n    private fetchClient: FetchClient,\n    public router: Router,\n    private ngZone: NgZone,\n    private routerService: RouterService,\n    private actionService: ActionService\n  ) {\n    this.fixE2eIssues();\n    this.$ng1RouteChangeSuccess = this.fromNg1Event(\n      this.injector.get('$rootScope'),\n      '$routeChangeSuccess'\n    );\n    this.$ng1RouteChangeStart = this.fromNg1Event(\n      this.injector.get('$rootScope'),\n      '$routeChangeStart'\n    );\n    this.hookAuth();\n    this.hookLanguage();\n    this.hookTabs();\n    this.hookNavigator();\n    this.hookUserMenu();\n    this.hookViewProvider();\n    this.router.initialNavigation();\n    this.ng1Routes();\n  }\n\n  hookViewProvider() {\n    const c8yViews = this.injector.get('c8yViews');\n    c8yViews.contextViews.subscribe(cfg => this.addRoute(cfg));\n  }\n\n  addRoute(cfg) {\n    this.routerService.addRoute({\n      label: cfg.label || cfg.name,\n      path: cfg.path,\n      icon: cfg.icon,\n      context: ViewContext[cfg.contextKey] as ViewContext,\n      priority: cfg.priority,\n      component: EmptyComponent,\n      data: {\n        showIf: cfg.showIf\n          ? ngxRoute => {\n              const params = {\n                ...ngxRoute.params,\n                [ViewContextLegacyParameter[cfg.contextKey]]: ngxRoute.params.id\n              };\n              const showIfResult = this.injector.invoke(cfg.showIf, undefined, {\n                $routeParams: params\n              });\n              // make sure showIf result is a promise with boolean result:\n              return this.injector\n                .get('$q')\n                .when(showIfResult)\n                .then(Boolean);\n            }\n          : undefined\n      }\n    });\n\n    if (cfg.runPhase) {\n      this.routerService.refresh();\n    }\n  }\n\n  ng1Routes() {\n    const template = '';\n    const fallbackRoutes = [];\n\n    // tslint:disable-next-line: forin\n    for (const context in ViewContext) {\n      const path = ViewContext[context].match(/(\\w+)\\//)[1];\n      const regexp = new RegExp(`^/${path}/(?:([^/]+)).*$`);\n      fallbackRoutes.push({\n        keys: [{ name: ViewContextLegacyParameter[context], optional: false }],\n        regexp,\n        template\n      });\n    }\n\n    /**\n     * When asset detail routes (/device/:id,  /group/:id) are matched in Angular Router, ngRoute in\n     * angular.js must also have matching generic routes so that the ids can be extracted from the paths and\n     * injected in multiple calls (showIf, c8yActions, etc) as properties of $routeParams.\n     *\n     * The function in src/ngRoute/route.js (angular.js) where the routes are matched is called parseRoute(). This\n     * function calls angular.forEach and in turn this function checks for the presence of a forEach method before\n     * trying object key iteration.\n     * By attaching a non enumerable forEach method to the routes object we guarantee that the fallback generic routes\n     * are only matched after any other registered through $routeProvider.when.\n     */\n    const $route = this.injector.get('$route');\n    Object.defineProperty($route.routes, 'forEach', {\n      // make non enumerable\n      value: function forEach(iterator, context) {\n        // tslint:disable-next-line: forin\n        for (const key in this) {\n          iterator.call(context, this[key], key, this);\n        }\n        fallbackRoutes.forEach(r => iterator.call(context, r));\n      }\n    });\n\n    /**\n     * Some functions use the current context. As some parts are upgraded and some not, the following updates the\n     * angularjs getContext function to resolve always the right context.\n     */\n    const c8yUiUtil = this.injector.get('c8yUiUtil');\n    const _getContext = c8yUiUtil.getContext;\n    this.router.events\n      .pipe(filter(event => event instanceof ActivationEnd))\n      .subscribe((event: ActivationEnd) => {\n        if (event.snapshot.routeConfig.path === '**') {\n          c8yUiUtil.getContext = _getContext;\n        } else if (event.snapshot.data && event.snapshot.data.context) {\n          c8yUiUtil.getContext = () => {\n            return {\n              context: event.snapshot.data.context.replace('/:id', ''),\n              id: event.snapshot.data.contextData.id\n            };\n          };\n        } else {\n          c8yUiUtil.getContext = () => ({ context: null, id: null });\n        }\n      });\n  }\n\n  fixE2eIssues() {\n    try {\n      const { ngZone } = this;\n      const { Utils } = (window as any).org.cometd;\n      const timeoutFn = Utils.setTimeout;\n      // tslint:disable-next-line:only-arrow-functions\n      Utils.setTimeout = function(...args) {\n        return ngZone.runOutsideAngular(() => timeoutFn.apply(Utils, args));\n      };\n    } catch (e) {\n      // do nothing\n    }\n\n    try {\n      const { ace } = window as any;\n      const editFn = ace.edit;\n      const { ngZone } = this;\n      // tslint:disable-next-line:only-arrow-functions\n      ace.edit = function(...args) {\n        return ngZone.runOutsideAngular(() => editFn.apply(ace, args));\n      };\n    } catch (e) {\n      // do nothing\n    }\n  }\n\n  setToken(token?: string, tfa?: string, type = 'Basic') {\n    const c8yAuth = this.injector.get('c8yAuth');\n    if (type === 'Basic') {\n      c8yAuth.onSetToken({ token, type });\n      if (tfa) {\n        c8yAuth.setTFAToken(tfa);\n      }\n    } else {\n      c8yAuth.authReady();\n    }\n  }\n\n  hookAuth() {\n    this.appState.currentUser.subscribe(u => {\n      if (u) {\n        const { headers } = this.fetchClient.getFetchOptions({});\n        this.injector.get('c8yAuth').headers = () => this.fetchClient.getFetchOptions({}).headers;\n        if (headers.Authorization) {\n          const token = headers.Authorization.match(/basic\\s(.*)$/i)[1];\n          if (token) {\n            this.setToken(token, headers.tfatoken);\n          }\n        } else {\n          this.setToken(undefined, headers.tfatoken, 'Oauth');\n        }\n        this.injector.get('$rootScope').$emit('authStateChange', { hasAuth: true });\n      } else {\n        this.injector.get('$rootScope').$emit('authStateChange', { hasAuth: false });\n      }\n    });\n  }\n\n  hookLanguage() {\n    let first = true;\n    this.appState\n      .map(store => store.lang)\n      .subscribe(lang => {\n        this.injector.get('c8yLocales').switchToLanguage(lang);\n        if (!first) {\n          this.injector.get('$rootScope').$apply();\n        }\n        first = false;\n      });\n  }\n\n  hookTabs() {\n    // Just for instantiation of the c8yAction service\n    this.injector.get('c8yActions');\n    const $location = this.injector.get('$location');\n    const c8yTabs = this.injector.get('c8yTabs');\n    let liveTabs = [];\n    c8yTabs.addTab = tab => {\n      liveTabs.push({\n        ...tab,\n        label: tab.label || tab.name,\n        path: decodeURIComponent(tab.path)\n      });\n      this.$liveTabs.next(liveTabs);\n    };\n    this.$ng1RouteChangeStart.subscribe(e => {\n      liveTabs = [];\n      this.$liveTabs.next(liveTabs);\n    });\n    this.$ng1RouteChangeSuccess\n      .subscribe(e => {\n        const path = $location.path();\n        if (this.router.url !== path) {\n          this.router.navigate(path.split('/'), {\n            queryParams: $location.search(),\n            skipLocationChange: true\n          });\n        }\n        if (this.actionService) {\n          this.actionService.refresh();\n        }\n      });\n    this.$routeChanges = this.$ng1RouteChangeSuccess.pipe(\n      merge(this.fromNg1Event(c8yTabs, c8yTabs.EVENT_UPDATE), of(1)),\n      debounceTime(100)\n    );\n  }\n\n  hookNavigator() {\n    this.navigationNodes$ = this.injector.get('c8yNavigator').rootNodes$;\n  }\n\n  getTabs(): Observable<any> {\n    const onlyVisible = ({ show }) => show;\n    const upgradeTab = tab => ({\n      ...tab,\n      label: tab.label || tab.name,\n      path: decodeURIComponent(tab.path)\n    });\n    const routeTabs = this.$routeChanges.pipe(\n      switchMap(() => {\n        const routes = this.injector.get('c8yTabs').routeTabs;\n        const visibilityPromise = Promise.all(\n          routes.map(({ checkingVisibility }) => checkingVisibility)\n        );\n        return visibilityPromise.then(() => routes.filter(onlyVisible).map(upgradeTab));\n      }),\n      startWith([])\n    );\n    return combineLatest(routeTabs, this.$liveTabs).pipe(\n      map(([route, live]) => route.concat(live))\n    );\n  }\n\n  getQuickLinks(): Promise<DocLink[]> {\n    const c8yQuickLinks = this.injector.get('c8yQuickLinks');\n    return c8yQuickLinks.list();\n  }\n\n  getActionBarItems(): Observable<ActionBarItem> {\n    const c8yActionBar = this.injector.get('c8yActionBar');\n    const $rootScope = this.injector.get('$rootScope');\n    const getActionBarElements = () =>\n      c8yActionBar.elements.map(element => ({\n        priority: element.getAttribute('action-bar-priority') || 0,\n        template: element,\n        placement: element.getAttribute('action-bar-position') || 'right'\n      }));\n    return this.fromNg1Event($rootScope, 'c8yActionBarChanged').pipe(\n      startWith(1),\n      map(getActionBarElements)\n    );\n  }\n\n  getBreadcrumbs(): Observable<Breadcrumb[]> {\n    const $location = this.injector.get('$location');\n    const path = $location.path();\n    const c8yBreadcrumbs = this.injector.get('c8yBreadcrumbs');\n    const breadcrumbs = c8yBreadcrumbs.get(path) || {};\n    const breadcrumbsData = breadcrumbs.data ? this.injector.invoke(breadcrumbs.data) : of([]);\n    return from(breadcrumbsData).pipe(\n      map((value: any[]) => {\n        value = value.concat(c8yBreadcrumbs.getLiveBreadcrumbs());\n        return value.map(\n          items => ({ items: items.slice(0, items.length - 1) as BreadcrumbItem[] } as Breadcrumb)\n        );\n      })\n    );\n  }\n\n  getSearch(): Search[] {\n    const c8ySearch = this.injector.get('c8ySearch');\n    return c8ySearch.list().map(item => {\n      return {\n        icon: 'search',\n        name: item.name,\n        term: '',\n        onSearch() {\n          if (this.term) {\n            c8ySearch.search(this.term);\n          }\n        }\n      } as Search;\n    });\n  }\n\n  getActions(): Observable<Action> {\n    const registeredActions = this.injector.get('c8yActions').registeredActions;\n    return of(\n      registeredActions\n        .filter(action => !action.hidden)\n        .map(action => ({\n          // The priority was reversed: Aligned it to dashboard, high first, low last.\n          priority: (action.priority || 0) * -1,\n          label: action.text,\n          icon: action.icon,\n          disabled: action.disabled,\n          action: () => {\n            this.injector.invoke(action.action, action);\n          }\n        }))\n    );\n  }\n\n  fromNg1Event(obj, evt) {\n    let stopListening;\n    function add(handler) {\n      stopListening = obj.$on(evt, handler);\n    }\n    return fromEventPattern(add, () => stopListening());\n  }\n\n  private hookUserMenu() {\n    const userMenuService = this.injector.get('c8yUserMenuService');\n    const c8yAccessDenied = this.injector.get('c8yAccessDenied');\n    userMenuService.add({\n      icon: 'exclamation-triangle',\n      priority: 10,\n      label: gettext('Access denied requests'),\n      click: c8yAccessDenied.showAccessDeniedRequestsList\n    });\n  }\n}\n\nexport function bridgeServiceFactory(\n  injector: any,\n  appState: AppStateService,\n  fetchClient: FetchClient,\n  router: Router,\n  ngZone: NgZone,\n  routerService: RouterService,\n  actionService: ActionService\n) {\n  return new BridgeService(injector, appState, fetchClient, router, ngZone, routerService, actionService);\n}\n\nexport const bridgeServiceProvider = {\n  provide: BridgeService,\n  useFactory: bridgeServiceFactory,\n  deps: ['$injector', AppStateService, FetchClient, Router, NgZone, RouterService, ActionService]\n};\n","import { Injectable } from '@angular/core';\nimport { ActionBarFactory, ActionBarItem } from '@c8y/ngx-components';\nimport { BridgeService } from './bridge.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class Ng1ActionBarFactoryService implements ActionBarFactory {\n  routeChanges$: Observable<any>;\n  constructor(\n    private bridge: BridgeService\n  ) {\n    this.routeChanges$ = bridge.$routeChanges;\n  }\n\n  get(): Observable<ActionBarItem> {\n    return this.bridge.getActionBarItems();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Action, ActionFactory, TabsService } from '@c8y/ngx-components';\nimport { BridgeService } from './bridge.service';\nimport { Observable } from 'rxjs';\nimport { Router } from '@angular/router';\n\n@Injectable()\nexport class Ng1ActionFactoryService implements ActionFactory {\n  routeChanges$: Observable<any>;\n  $location: any;\n  constructor(\n    private bridge: BridgeService,\n    private tabs: TabsService\n  ) {\n    this.routeChanges$ = bridge.$routeChanges;\n    this.$location = bridge.injector.get('$location');\n    this.tabs.items$.subscribe((newTabs) => this.handleTabsRedirect(newTabs));\n  }\n\n  handleTabsRedirect(tabs) {\n    /**\n     * This function is doing the same process as function redirect in the file\n     * modules/core/ui/navigation/tabs.provider.js\n     * That function  is not run because bridge.service.ts overrides the method addTab where the redirect() was called.\n     */\n    const redirectedTab = tabs.find((tab) => tab.redirectedTo);\n    const [ topPriorityTab ] = tabs;\n    if (redirectedTab && !topPriorityTab.redirectedTo) {\n      this.$location.replace();\n      this.$location.path(topPriorityTab.path);\n      topPriorityTab.redirectedTo = true;\n      redirectedTab.redirectedTo = false;\n    }\n  }\n\n  get() {\n    return this.bridge.getActions();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BreadcrumbFactory } from '@c8y/ngx-components';\nimport { ReplaySubject } from 'rxjs';\nimport { debounceTime, switchMap } from 'rxjs/operators';\nimport { BridgeService } from './bridge.service';\n\n@Injectable()\nexport class Ng1BreadcrumbFactoryService implements BreadcrumbFactory {\n  private trigger: any = new ReplaySubject(1);\n  private breadcrumbs = this.trigger.pipe(\n    debounceTime(100),\n    switchMap(() => {\n      return this.bridge.getBreadcrumbs();\n    })\n  );\n  constructor(\n    private bridge: BridgeService\n  ) {}\n\n  get() {\n    this.trigger.next();\n    return this.breadcrumbs;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NavigatorNodeFactory } from '@c8y/ngx-components';\nimport { BridgeService } from './bridge.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class Ng1NodesFactoryService implements NavigatorNodeFactory {\n  constructor(\n    private bridge: BridgeService\n  ) {}\n\n  get() {\n    return this.bridge.navigationNodes$;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Search, SearchFactory } from '@c8y/ngx-components';\nimport { BridgeService } from './bridge.service';\n\n@Injectable()\nexport class Ng1SearchFactoryService implements SearchFactory {\n  search: Search[];\n  constructor(private bridge: BridgeService) {\n    this.search = this.bridge.getSearch();\n  }\n\n  get() {\n    return this.search;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TabFactory } from '@c8y/ngx-components';\nimport { BridgeService } from './bridge.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class Ng1TabsFactoryService implements TabFactory {\n  tabsObservable;\n  constructor(private bridge: BridgeService) {\n    this.tabsObservable = bridge.getTabs();\n  }\n  get() {\n    return this.tabsObservable;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { DocLinkFactory, DocLink } from '@c8y/ngx-components';\nimport { BridgeService } from './bridge.service';\n\n@Injectable()\nexport class Ng1DocsFactoryService implements DocLinkFactory {\n  private links: Promise<DocLink[]>;\n  constructor(private bridge: BridgeService) {\n    this.links = this.bridge.getQuickLinks();\n    this.links.then(list => {\n      list.map(el => {\n        el.type = el.type || 'quicklink';\n        return el;\n      });\n    });\n  }\n\n  get() {\n    return this.links;\n  }\n}\n","import { bridgeServiceProvider } from './bridge.service';\nimport {\n  HOOK_ACTION,\n  HOOK_ACTION_BAR,\n  HOOK_BREADCRUMB,\n  HOOK_NAVIGATOR_NODES,\n  HOOK_SEARCH,\n  HOOK_TABS,\n  HOOK_DOCS,\n  RouterModule\n} from '@c8y/ngx-components';\nimport { Ng1ActionBarFactoryService } from './action-bar.factory';\nimport { Ng1ActionFactoryService } from './action.factory';\nimport { Ng1BreadcrumbFactoryService } from './breadcrumb.factory';\nimport { Ng1NodesFactoryService } from './nodes.factory';\nimport { Ng1SearchFactoryService } from './search.factory';\nimport { Ng1TabsFactoryService } from './tabs.factory';\nimport { NgModule } from '@angular/core';\nimport { Ng1DocsFactoryService } from './docs.factory';\n\n@NgModule({\n  imports: [RouterModule],\n  exports: [],\n  providers: [\n    bridgeServiceProvider,\n    { provide: HOOK_NAVIGATOR_NODES, useClass: Ng1NodesFactoryService, multi: true },\n    { provide: HOOK_TABS, useClass: Ng1TabsFactoryService, multi: true },\n    { provide: HOOK_ACTION_BAR, useClass: Ng1ActionBarFactoryService, multi: true },\n    { provide: HOOK_ACTION, useClass: Ng1ActionFactoryService, multi: true },\n    { provide: HOOK_BREADCRUMB, useClass: Ng1BreadcrumbFactoryService, multi: true },\n    { provide: HOOK_SEARCH, useClass: Ng1SearchFactoryService, multi: true },\n    { provide: HOOK_DOCS, useClass: Ng1DocsFactoryService, multi: true }\n  ]\n})\nexport class UpgradeModule {}\n","import { Injectable, NgZone } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ActionBarService, getActivatedRoute } from '@c8y/ngx-components';\nimport {\n  ContextDashboardService,\n  ContextDashboardManagedObject,\n  ContextWidgetConfig\n} from '@c8y/ngx-components/context-dashboard';\nimport { gettext } from '@c8y/ngx-components';\nimport { get } from 'lodash-es';\n\n@Injectable()\nexport class DashboardBridgeService {\n  dashboardSvc;\n  compile;\n  dashboardClipboard;\n\n  constructor(\n    private ng1Injector: any,\n    private zone: NgZone,\n    private router: Router,\n    private contextDashboardService: ContextDashboardService,\n    private actionBarService: ActionBarService\n  ) {\n    this.dashboardSvc = ng1Injector.get('dashboardSvc');\n    this.compile = ng1Injector.get('$compile');\n  }\n\n  get ng1Components() {\n    return this.ng1Injector.get('c8yComponents');\n  }\n\n  async instantiateComponent(widget, element) {\n    const { dashboard, context, child } = widget;\n    if (dashboard) {\n      const transformedChild = await this.dashboardSvc.transformChildWithContext(\n        this.dashboardSvc.forcedContext || context,\n        dashboard,\n        child\n      );\n      if (this.dashboardSvc.forcedContext || dashboard.deviceType) {\n        await this.dashboardSvc.updateConfigTargetsWithContext(\n          this.dashboardSvc.forcedContext || context,\n          transformedChild.config\n        );\n      }\n      return this.zone.runOutsideAngular(() =>\n        this.loadTemplate(transformedChild, child, element, context)\n      );\n    } else {\n      return this.loadConfigTemplate(element, widget);\n    }\n  }\n\n  async editDashboard(dashboard) {\n    return this.dashboardSvc.editCurrentDashboard({ dashboardId: dashboard.id });\n  }\n\n  copyDashboard() {\n    const dashboard = this.getDashboard();\n    const couldCopy = this.dashboardSvc.copyDashboard(dashboard.c8y_Dashboard);\n    if (couldCopy) {\n      this.dashboardClipboard = dashboard;\n      this.actionBarService.refresh();\n      return dashboard;\n    }\n  }\n\n  async pasteDashboard() {\n    try {\n      const newDashboard = await this.dashboardSvc.pasteDashboard();\n      this.navigateToDashboard(newDashboard);\n      this.dashboardClipboard = undefined;\n    } catch (ex) {\n      // intended empty\n    }\n    this.actionBarService.refresh();\n  }\n\n  instantiateDeviceSelector(element, widgetConfig: ContextWidgetConfig) {\n    return this.loadConfigTemplate(element, widgetConfig, true);\n  }\n\n  private loadTemplate(transformedChild, child, element, context) {\n    const scope = this.ng1Injector.get('$rootScope').$new(true);\n    scope.child = transformedChild;\n    scope.dashboardContext = context;\n    if (child.widgetComponent) {\n      element.innerHTML = `<c8y-ui-component component-name=\"'${\n        child.widgetComponent\n      }'\" config=\"child.config\" context=\"dashboardContext\"></c8y-ui-component>`;\n    } else if (child.templateUrl) {\n      element.innerHTML = `<ng-include src=\"'${child.templateUrl}'\"></ng-include>`;\n    }\n    this.compile(element)(scope);\n    return scope;\n  }\n\n  private navigateToDashboard(dashboard: ContextDashboardManagedObject) {\n    if (/dashboard/.test(this.router.url)) {\n      this.router.navigate(['..', dashboard.id], {\n        relativeTo: getActivatedRoute(this.router)\n      });\n    } else {\n      this.router.navigate(['..', 'dashboard', dashboard.id], {\n        relativeTo: getActivatedRoute(this.router)\n      });\n    }\n  }\n\n  private getDashboard() {\n    return getActivatedRoute(this.router).snapshot.data.dashboard;\n  }\n\n  private loadConfigTemplate(\n    element,\n    widgetConfig: ContextWidgetConfig,\n    onlyDeviceSelector = false\n  ) {\n    const { settings } = widgetConfig;\n    const scope = this.ng1Injector.get('$rootScope').$new(true);\n\n    scope.settings = { ...settings, ...settings.ng1 };\n    scope.options = widgetConfig.options;\n    scope.config = widgetConfig;\n    scope.forms = {};\n    scope.rootId = settings.context.id;\n    scope.dashboard = get(widgetConfig, 'settings.dashboardMo');\n\n    let configCmp = '';\n    if (!onlyDeviceSelector) {\n      if (widgetConfig.settings.configComponent) {\n        configCmp = `<c8y-ui-component component-name=\"'${\n          widgetConfig.settings.configComponent\n        }'\" config=\"config\"></c8y-ui-component>`;\n      } else if (widgetConfig.settings.configTemplateUrl) {\n        configCmp = `<ng-include src=\"'${widgetConfig.settings.configTemplateUrl}'\"></ng-include>`;\n      }\n    }\n\n    element.innerHTML = `\n    <ng-form name=\"forms.componentForm\">\n      <div class=\"form-group\"\n        ng-if=\"!settings.noDeviceTarget\"\n        ng-style=\"{height: settings.hideTarget && '0', overflow: 'hidden'}\"\n      >\n        <label translate>${gettext('Target assets or devices')}</label>\n        <c8y-device-selector-combo parent=\"rootId\"\n          selected-child-device=\"config.device\"\n          groups-selectable=\"settings.groupsSelectable\"\n        ></c8y-device-selector-combo>\n      </div>\n      ${configCmp}\n    </ng-form>`;\n\n    scope.$watch('forms.componentForm.$invalid', formStatus => {\n      this.contextDashboardService.formDisabled = formStatus;\n    });\n    this.compile(element)(scope);\n    this.contextDashboardService.formDisabled = scope.forms.componentForm.$invalid;\n\n    return scope;\n  }\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, OnInit, OnDestroy, Optional } from '@angular/core';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\nimport { WidgetsDashboardComponent } from '@c8y/ngx-components';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'c8y-widget-legacy',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class WidgetComponent implements OnInit, OnDestroy {\n  ng1Scope;\n  config;\n  private resizeSubscription?: Subscription;\n  constructor(\n    @Optional() private dashboard: WidgetsDashboardComponent,\n    private dashboardBridgeService: DashboardBridgeService,\n    private el: ElementRef\n  ) {}\n\n  async ngOnInit() {\n    this.ng1Scope = await this.dashboardBridgeService.instantiateComponent(this.config, this.el.nativeElement);\n    if (this.dashboard) {\n      this.resizeSubscription = this.dashboard.onChangeDashboard.subscribe(() => {\n        this.ng1Scope.$broadcast('dashboardResize');\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.ng1Scope) {\n      this.ng1Scope.$destroy();\n    }\n    if (this.resizeSubscription) {\n      this.resizeSubscription.unsubscribe();\n    }\n  }\n}\n","import { Input, ChangeDetectionStrategy, Component, ElementRef, OnInit, OnDestroy } from '@angular/core';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\n\n@Component({\n  selector: 'c8y-device-selector-legacy',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DeviceSelectorComponent implements OnInit, OnDestroy {\n  ng1Scope;\n  config;\n\n  constructor(\n    private dashboardBridgeService: DashboardBridgeService,\n    private el: ElementRef\n  ) {}\n\n  async ngOnInit() {\n    this.ng1Scope = this.dashboardBridgeService.instantiateDeviceSelector(this.el.nativeElement, this.config);\n  }\n\n  ngOnDestroy(): void {\n    if (this.ng1Scope) {\n      this.ng1Scope.$destroy();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { DynamicComponentDefinition } from '@c8y/ngx-components';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\nimport { WidgetComponent } from './widget.component';\nimport { DeviceSelectorComponent } from './device-selector.component';\n\n@Injectable()\nexport class Ng1ComponentFactoryService {\n  constructor(private bridge: DashboardBridgeService) {}\n  async get() {\n    const components = (await this.bridge.ng1Components.list()).map(cmp => {\n      const data = {\n        settings: {\n          ...cmp.options,\n          configTemplateUrl: cmp.configTemplateUrl,\n          widgetComponent: cmp.widgetComponent,\n          configComponent: cmp.configComponent,\n          transformConfigWithContext:\n            cmp.transformConfigWithContext || cmp.componentTransformConfigWithContext,\n          upgrade: true\n        }\n      } as any;\n      data.settings.templateUrl = cmp.templateUrl; // workaround as in object it creates build error\n\n      return {\n        id: cmp.name,\n        label: cmp.nameDisplay || cmp.name,\n        description: cmp.description,\n        component: WidgetComponent,\n        configComponent: WidgetComponent,\n        previewImage: cmp.previewImage,\n        data\n      } as DynamicComponentDefinition;\n    });\n\n    // add the device selector legacy component\n    components.push({\n      id: 'device.selector.legacy',\n      label: 'Device selector',\n      description: '',\n      data: { settings: { noNewWidgets: true, upgrade: true } },\n      component: DeviceSelectorComponent\n    });\n\n    return components;\n  }\n}\n","import { Component, OnInit, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\n\n@Component({\n  selector: 'c8y-copy-action-legacy',\n  template: `\n    <ng-template #templateCopy>\n      <li>\n        <button title=\"{{'Copy dashboard' | translate}}\" (click)=\"copyDashboard()\">\n          <i class=\"fa fw fa-clone\"></i>&nbsp;<span translate>Copy dashboard</span>\n        </button>\n      </li>\n    </ng-template>\n  `\n})\nexport class CopyActionComponent implements OnInit {\n  @ViewChild('templateCopy', { read: TemplateRef, static: true }) templateCopy;\n\n  constructor(\n    private vcRef: ViewContainerRef,\n    private dashboardBridgeService: DashboardBridgeService\n  ) {}\n\n  ngOnInit() {\n    this.vcRef.createEmbeddedView(this.templateCopy);\n  }\n\n  copyDashboard() {\n    this.dashboardBridgeService.copyDashboard();\n  }\n}\n","import { Component, OnInit, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\n\n@Component({\n  selector: 'c8y-paste-action-legacy',\n  template: `\n    <ng-template #templatePaste>\n      <li>\n        <button title=\"{{'Paste dashboard' | translate}}\" (click)=\"pasteDashboard()\">\n          <i class=\"fa fw fa-clipboard\"></i>&nbsp;<span translate>Paste dashboard</span>&nbsp;<span\n            >\"{{ dashboardName }}\"</span\n          >\n        </button>\n      </li>\n    </ng-template>\n  `\n})\nexport class PasteActionComponent implements OnInit {\n  @ViewChild('templatePaste', { read: TemplateRef, static: true }) templatePaste;\n  dashboardName = '';\n\n  constructor(\n    private vcRef: ViewContainerRef,\n    private dashboardBridgeService: DashboardBridgeService\n  ) {}\n\n  ngOnInit() {\n    this.vcRef.createEmbeddedView(this.templatePaste);\n    this.dashboardName = this.dashboardBridgeService.dashboardClipboard.c8y_Dashboard.name;\n  }\n\n  pasteDashboard() {\n    this.dashboardBridgeService.pasteDashboard();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ActionBarFactory, ActionBarItem, ViewContext } from '@c8y/ngx-components';\nimport { CopyActionComponent } from './copy-action.component';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\nimport { PasteActionComponent } from './paste-action.component';\n\n@Injectable()\nexport class Ng1DashboardActionFactoryService implements ActionBarFactory {\n  constructor(private dashboardBridgeService: DashboardBridgeService) {}\n\n  get(activeRoute?: ActivatedRoute) {\n    const actions = [];\n    const data =\n      !activeRoute.parent || activeRoute.snapshot.data.context\n        ? activeRoute.snapshot.data\n        : activeRoute.parent.snapshot.data;\n    const { contextData } = data;\n    const isDashboard = contextData && activeRoute.snapshot.data.dashboard;\n    const canPaste =\n      contextData &&\n      [ViewContext.Device, ViewContext.Group].includes(data.context) &&\n      this.dashboardBridgeService.dashboardClipboard;\n\n    if (isDashboard) {\n      actions.push({\n        priority: -20,\n        placement: 'more',\n        template: CopyActionComponent\n      } as ActionBarItem);\n    }\n\n    if (canPaste) {\n      actions.push({\n        priority: -10,\n        placement: 'more',\n        template: PasteActionComponent\n      } as ActionBarItem);\n    }\n\n    return actions;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, NgZone, Optional } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ActionBarService, HOOK_ACTION_BAR, HOOK_COMPONENTS} from '@c8y/ngx-components';\nimport { ContextDashboardService } from '@c8y/ngx-components/context-dashboard';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { Ng1ComponentFactoryService } from './component.factory';\nimport { CopyActionComponent } from './copy-action.component';\nimport { Ng1DashboardActionFactoryService } from './dashboard-actions.factory';\nimport { DashboardBridgeService } from './dashboard-bridge.service';\nimport { PasteActionComponent } from './paste-action.component';\nimport { WidgetComponent } from './widget.component';\nimport { DeviceSelectorComponent } from './device-selector.component';\n\n@NgModule({\n  declarations: [DeviceSelectorComponent, WidgetComponent, CopyActionComponent, PasteActionComponent],\n  entryComponents: [DeviceSelectorComponent, WidgetComponent, CopyActionComponent, PasteActionComponent],\n  imports: [CommonModule, TranslateModule],\n  providers: [\n    {\n      provide: DashboardBridgeService,\n      useFactory: dashboardBridgeFactory,\n      deps: ['$injector', NgZone, Router, [new Optional(), ContextDashboardService], ActionBarService]\n    },\n    { provide: HOOK_COMPONENTS, useClass: Ng1ComponentFactoryService, multi: true },\n    { provide: HOOK_ACTION_BAR, useClass: Ng1DashboardActionFactoryService, multi: true }\n  ]\n})\nexport class DashboardUpgradeModule {}\n\nexport function dashboardBridgeFactory(injector, ngZone, router, contextDashboardService, actionBarService) {\n  return new DashboardBridgeService(injector, ngZone, router, contextDashboardService, actionBarService);\n}\n","function c8yAlertDecorator(\r\n    $delegate,\r\n    $rootScope,\r\n    $injector\r\n) {\r\n  'ngInject';\r\n\r\n  $delegate.add = (alert) => {\r\n    $delegate.addAlert(transformAlert(alert));\r\n  };\r\n\r\n  $rootScope.$on('alert', (evt, alert) => {\r\n    $delegate.addAlert(transformAlert(alert));\r\n  });\r\n\r\n  $rootScope.$on('message', (evt, alert) => {\r\n    $delegate.addAlert(transformAlert(alert));\r\n  });\r\n\r\n  for (const property in $delegate) {\r\n    if (typeof $delegate[property] === 'function') {\r\n      $delegate[property] = $delegate[property].bind($delegate);\r\n    }\r\n  }\r\n\r\n  function transformAlert(alert: any) {\r\n    const newAlert: any = { ...alert };\r\n    if (alert.onClose) {\r\n      newAlert.onClose = () => {\r\n        $injector.invoke(alert.onClose);\r\n      };\r\n    }\r\n    if (alert.onDetail) {\r\n      newAlert.onDetail = () => {\r\n        $injector.invoke(alert.onDetail);\r\n      };\r\n    }\r\n    return newAlert;\r\n  }\r\n\r\n  return $delegate;\r\n}\r\n\r\nexport { c8yAlertDecorator };\r\n","import { downgradeComponent } from '@angular/upgrade/static';\nimport {\n  BootstrapComponent,\n  DataGridComponent,\n  UserTotpRevokeComponent\n} from '@c8y/ngx-components';\nimport { AppLogsAutoRefreshComponent } from '@c8y/ngx-components/app-logs';\nimport { ImpactProviderSettingsComponent } from '@c8y/ngx-components/connectivity';\nexport const bootstrapComponent = downgradeComponent({ component: BootstrapComponent });\nexport const userTotpComponent = downgradeComponent({ component: UserTotpRevokeComponent });\nexport const appLogsAutoRefreshComponent = downgradeComponent({\n  component: AppLogsAutoRefreshComponent\n});\nexport const dataGridComponent = downgradeComponent({ component: DataGridComponent });\nexport const impactProviderSettingsComponent = downgradeComponent({\n  component: ImpactProviderSettingsComponent\n});\n","import { Injectable, Inject } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { HOOK_PATTERN_MESSAGES } from '@c8y/ngx-components';\n\n@Injectable()\nexport class ServerMessagesService {\n\n  MESSAGE_PATTERNS: any;\n  constructor(\n    private translateService: TranslateService,\n    @Inject(HOOK_PATTERN_MESSAGES) patterns\n  ) {\n    this.MESSAGE_PATTERNS = patterns;\n  }\n\n  translate(s: string) {\n    return this.translateService.instant(s);\n  }\n}\n","import { downgradeInjectable } from '@angular/upgrade/static';\nimport {\n  AlertService,\n  AppStateService,\n  DocsService,\n  HeaderService,\n  PasswordService,\n  UserMenuService\n} from '@c8y/ngx-components';\nimport { ApiService } from '@c8y/ngx-components/api';\nimport { BulkOperationDetailsService } from '@c8y/ngx-components/operations';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BridgeService } from '../bridge.service';\nimport { ServerMessagesService } from './serverMessages.service';\n\nexport const bridgeService = downgradeInjectable(BridgeService);\nexport const appStateService = downgradeInjectable(AppStateService);\nexport const headerService = downgradeInjectable(HeaderService);\nexport const alertsService = downgradeInjectable(AlertService);\nexport const userMenuService = downgradeInjectable(UserMenuService);\nexport const apiService = downgradeInjectable(ApiService);\nexport const docsService = downgradeInjectable(DocsService);\nexport const passwordService = downgradeInjectable(PasswordService);\nexport const translateService = downgradeInjectable(TranslateService);\nexport const serverMessagesService = downgradeInjectable(ServerMessagesService);\nexport const bulkOperationDetailsService = downgradeInjectable(BulkOperationDetailsService);\n","import * as angular from 'angular';\n\nfunction gettextCatalogDecorator(\n  $delegate,\n  $interpolate,\n  c8yTranslate\n) {\n  'ngInject';\n\n  const gettextCatalog = $delegate;\n  const originalGetString = angular.bind(gettextCatalog, gettextCatalog.getString);\n\n  function newGetString(input, scope, context) {\n    if (typeof input === 'string') {\n      const translatedString = originalGetString(input, scope, context);\n      const interpolatedString = scope ? $interpolate(input)(scope) : input;\n\n      let stringToReturn = translatedString;\n\n      if (translatedString && translatedString === interpolatedString) {\n        const translatedServerMessage = c8yTranslate.instant(interpolatedString);\n        stringToReturn = translatedServerMessage;\n      }\n\n      return stringToReturn;\n    }\n\n    return input;\n  }\n\n  gettextCatalog.getString = newGetString;\n\n  return gettextCatalog;\n}\n\nexport { gettextCatalogDecorator };\n","function groupTypesHierarchyNavigatorDecorator(\n  $delegate,\n  $q,\n) {\n  'ngInject';\n  $delegate.loadAll = () => $q.when();\n  $delegate.addGroupNavigation = () => $q.when();\n  return $delegate;\n}\n\nexport { groupTypesHierarchyNavigatorDecorator };\n","function c8yNg1HttpInterceptor(\r\n  $q,\r\n  c8yLoadingIndicator,\r\n  c8yApiService\r\n) {\r\n  'ngInject';\r\n\r\n  function request(config) {\r\n    const { url, method } = config;\r\n    c8yApiService.onStart({ url, method, options: config });\r\n    return config;\r\n  }\r\n\r\n  function requestError(rejection) {\r\n    finishRequest(rejection);\r\n    return $q.reject(rejection);\r\n  }\r\n\r\n  function response(res) {\r\n    finishRequest(res);\r\n    return res;\r\n  }\r\n\r\n  function responseError(rejection) {\r\n    finishRequest(rejection);\r\n    c8yLoadingIndicator.responseError(rejection);\r\n    return $q.reject(rejection);\r\n  }\r\n\r\n  function finishRequest(res) {\r\n    const { url, method } = res.config;\r\n    c8yApiService.onFinish({\r\n      url,\r\n      method,\r\n      response: res,\r\n      options: res.config\r\n    });\r\n  }\r\n\r\n  return {\r\n    request,\r\n    requestError,\r\n    response,\r\n    responseError\r\n  };\r\n}\r\n\r\nexport { c8yNg1HttpInterceptor };\r\n","import { NavigatorNodeRoot, NavigatorNode } from '@c8y/ngx-components';\nimport { assign } from 'lodash-es';\n\nexport class NavigatorNodeRootLegacy extends NavigatorNodeRoot {\n\n  addRoot(nodeData): NavigatorNode {\n    let duplicate;\n    if (nodeData.path === '') {\n      nodeData.path = '/';\n    }\n    nodeData.label = nodeData.name;\n    if (typeof nodeData.parent === 'object') {\n      nodeData.parent.label = nodeData.parent.name;\n    }\n\n    if (nodeData.preventDuplicates) {\n      duplicate = this.find(({ path, parents, label}) => {\n        return path === nodeData.path &&\n          (label === nodeData.label) &&\n          parents.some((p) => p.label === nodeData.parent);\n      });\n      if (duplicate) {\n        duplicate.routerLinkExact = false;\n      }\n    }\n\n    return duplicate || super.addRoot(nodeData);\n  }\n\n  createNode(node) {\n    const newNode = super.createNode(node);\n    const update = newNode.update.bind(newNode);\n    const root = this;\n    return Object.defineProperties(assign(newNode, {\n      realName: (newNode as any).name || newNode.label,\n      _parent: true, // just use it to detect if it has been deleted\n      update(data) {\n        if (this._parent === undefined) {\n          // _parent was deleted somene instead to put this in root\n          root.addRoot(this);\n          // put it back so it can be deleted again\n          this._parent = true;\n        }\n        update(data);\n      },\n      addChild(nodeChild) {\n        this.add(root.createNode(nodeChild));\n      }\n    }), {\n      label: {\n        get() {\n          return this.realName || '';\n        },\n        set(name) {\n          this.realName = name;\n        }\n      },\n      name: {\n        get() {\n          return this.realName || '';\n        },\n        set(name) {\n          this.realName = name;\n        }\n      },\n      show: {\n        get() {\n          return !this.hidden;\n        },\n        set(show) {\n          this.hidden = !show;\n        }\n      }\n    });\n  }\n}\n","import { NavigatorNode } from '@c8y/ngx-components';\nimport { Observable, Subject, defer, of } from 'rxjs';\nimport { merge } from 'rxjs/operators';\nimport { pick,  map, property, some, every } from 'lodash-es';\nimport { NavigatorNodeRootLegacy } from './navigator-node-root-legacy';\n\n// Just to hook into the bridge service\nexport function c8yNavigatorProvider() {\n  const root = new NavigatorNodeRootLegacy();\n  const rootNodesSubject: Subject<NavigatorNode[]> = new Subject();\n  const conditionalNodes = [];\n  const rootNodes$: Observable<NavigatorNode[]> = rootNodesSubject.pipe(\n    merge(defer(() => of(root.children))),\n  );\n\n  function addNavigation(nodes) {\n    const nodeList = (Array.isArray(nodes) ? nodes : [nodes]);\n    nodeList.forEach((node) => {\n      if (isConditional(node)) {\n        node.hidden = undefined;\n        conditionalNodes.push(node);\n      }\n      node.navNode = root.addRoot(node);\n    });\n    rootNodesSubject.next(root.children);\n  }\n\n  function removeNavigation(node) {\n    const found = root.find((n) => n === node);\n    if (found) {\n      found.parents.forEach((p) => p.remove(found));\n      rootNodesSubject.next(root.children);\n    }\n  }\n\n  function findNode(node) {\n    return root.find(node);\n  }\n\n  function isConditional(node) {\n    return node.showIf || node.showIfPermissions || node.showIfContainsVisibleViews;\n  }\n\n  function $get($q, $injector) {\n    'ngInject';\n\n    // This avoids the circular dependency\n    setTimeout(() => conditionalNodes.forEach(processShowIf));\n\n    function processShowIf(node) {\n      const c8yUiUtil = $injector.get('c8yUiUtil');\n      const visibilityPromises = [];\n      const {\n        showIf,\n        showIfPermissions,\n        showIfContainsVisibleViews\n      } = node;\n\n      if (showIf) {\n        visibilityPromises.push($injector.invoke(showIf));\n      }\n      if (showIfContainsVisibleViews) {\n        visibilityPromises.push(viewsConditionalVisibility(node));\n      }\n\n      c8yUiUtil.configureVisibility({\n        showIf: () => $q.all(visibilityPromises).then(every),\n        showIfPermissions\n      }, 'visible')\n        .then(({ visible }) => {\n          if (visible) {\n            node.navNode.update({\n              hidden: false,\n              showIf: null,\n              showIfPermission: null,\n              showIfContainsVisibleViews: null\n            });\n          } else {\n            node.navNode.update({\n              hidden: true\n            });\n          }\n        });\n    }\n\n    function viewsConditionalVisibility(node) {\n      const c8yUiUtil = $injector.get('c8yUiUtil');\n      const c8yViews = $injector.get('c8yViews');\n      const views = c8yViews.getByPath(node.path);\n      return $q.all(\n        map(views, (view) => c8yUiUtil\n          .configureVisibility(pick(view, ['showIf', 'showIfPermissions']), 'show', false)\n          .then(property('show'))\n        )\n      )\n      .then(some);\n    }\n\n    return {\n      rootNodes() {\n        return root.children;\n      },\n      findNode,\n      addNavigation,\n      removeNavigation,\n      rootNodes$\n    };\n  }\n\n  return {\n    $get,\n    addNavigation,\n    removeNavigation\n  };\n}\n","const rootComponent = {\n  template: `\n  <c8y-bootstrap>\n    <div id=\"c8y-legacy-view\">\n      <div ng-view ng-if=\"vm.widthSet && vm.authState.hasAuth\"></div>\n    </div>\n  </c8y-bootstrap>`,\n  controller: c8yUiRootController,\n  controllerAs: 'vm'\n};\n\nfunction c8yUiRootController(\n  $rootScope,\n  $timeout,\n  c8yBase,\n  c8yNavigator,\n  c8yApplication,\n  c8yHeaderService\n) {\n  'ngInject';\n  const vm = this;\n\n  Object.assign(vm, {\n    $onInit,\n    navOpen: false\n  });\n\n  ////////////\n\n  function $onInit() {\n    c8yHeaderService.map((states) => states.nav.open).subscribe((isOpen) => {\n      vm.navOpen = isOpen;\n    });\n    c8yHeaderService.configNavigator({canToggle: true});\n    $rootScope.$on('authStateChange', onAuthStateChange);\n    vm.rootNodes = c8yNavigator.rootNodes;\n    c8yApplication.currentAppCached().then(onAppInfo);\n    vm.navHiddenOnStartup = c8yBase.appOption('hide_navigator');\n    checkReady();\n  }\n\n  function onAuthStateChange(evt, data) {\n    vm.authState = data;\n  }\n\n  function onAppInfo() {\n    vm.tabsHorizontal = c8yBase.appOption('tabsHorizontal');\n  }\n\n  function checkReady() {\n    const element = document.querySelector('#c8y-legacy-view');\n    const hasWidth = element && element.clientWidth;\n    if (hasWidth) {\n      vm.widthSet = true;\n    } else {\n      $timeout(checkReady);\n    }\n  }\n}\nexport { rootComponent };\n","import * as angular from 'angular';\n\nfunction c8yTitleDecorator(\n  $q,\n  $delegate,\n  $injector,\n  $rootScope,\n  $location,\n  $templateCache,\n  $compile,\n  c8yHeaderService\n) {\n  'ngInject';\n\n  $delegate.changeTitle = changeTitle;\n  $delegate.setTitleElement = setTitleElement;\n\n  $rootScope.$on('$routeChangeStart', () => {\n    changeTitle({});\n  });\n\n  $rootScope.$on('$routeChangeSuccess', (event) => {\n    const title = $delegate.get($location.path());\n    if (title) {\n      const titleData = $q.when(title.data ? $injector.invoke(title.data) : {});\n      titleData.then((data) => {\n        const { templateUrl } = data;\n        if (templateUrl) {\n          const template = $templateCache.get(templateUrl);\n          setTitleElement($compile(template)(event.targetScope));\n        } else {\n          changeTitle(data);\n        }\n      });\n    }\n  });\n\n  function changeTitle(newTitle) {\n    $q.when(newTitle).then((title) => changeTitleInAngular(translate(title)));\n  }\n\n  function translate({title, subtitle}) {\n    const isolatedScope = $rootScope.$new(true);\n    isolatedScope.title = title;\n    isolatedScope.subtitle = subtitle;\n    return $compile(angular.element(`\n      <h1 class=\"text-truncate\">{{title | translate}}\n      <small>{{ subtitle | translate }}</small></h1>\n    `))(isolatedScope)[0];\n  }\n\n  function changeTitleInAngular(domElement) {\n    c8yHeaderService.changeTitle(domElement);\n  }\n\n  function setTitleElement($element) {\n    $element.show();\n    changeTitleInAngular($element[0]);\n  }\n\n  return $delegate;\n}\n\nexport { c8yTitleDecorator };\n","import { NgZone } from '@angular/core';\nimport { downgradeInjectable } from '@angular/upgrade/static';\nimport * as angular from 'angular';\nimport { c8yAlertDecorator } from './alert.decorator';\nimport {\n  appLogsAutoRefreshComponent,\n  bootstrapComponent,\n  dataGridComponent,\n  impactProviderSettingsComponent,\n  userTotpComponent\n} from './downgraded.components';\nimport {\n  alertsService,\n  apiService,\n  appStateService,\n  bridgeService,\n  bulkOperationDetailsService,\n  docsService,\n  headerService,\n  passwordService,\n  serverMessagesService,\n  translateService,\n  userMenuService\n} from './downgraded.services';\nimport { gettextCatalogDecorator } from './gettextCatalog.decorator';\nimport { groupTypesHierarchyNavigatorDecorator } from './groupsHierarchyNavigator.decorator';\nimport { c8yNg1HttpInterceptor } from './http.interceptor';\nimport { c8yNavigatorProvider } from './navigator.provider';\nimport { rootComponent } from './root.component';\nimport { c8yTitleDecorator } from './title.decorator';\nimport { c8yViewsProvider } from './views.provider';\n\nconst NAME = 'c8y.upgrade';\n(window as any).preventNg1Bootstrap = true;\n\nangular\n  .module(NAME, [])\n  .config($httpProvider => {\n    'ngInject';\n\n    const ng1InterceptorIndex = $httpProvider.interceptors.indexOf('c8yLoadingIndicator');\n    if (ng1InterceptorIndex > -1) {\n      $httpProvider.interceptors.splice(ng1InterceptorIndex, 1);\n    }\n    $httpProvider.interceptors.push(c8yNg1HttpInterceptor);\n  })\n  .component('c8yUiRoot', rootComponent)\n  .directive('c8yBootstrap', bootstrapComponent)\n  .factory('c8yBridgeService', bridgeService)\n  .factory('c8yAppStateService', appStateService)\n  .factory('c8yHeaderService', headerService)\n  .factory('c8yUserMenuService', userMenuService)\n  .decorator('c8yTitle', c8yTitleDecorator)\n  .factory('c8yAlert', alertsService)\n  .decorator('c8yAlert', c8yAlertDecorator)\n  .decorator('groupTypesHierarchyNavigator', groupTypesHierarchyNavigatorDecorator) // prevents loading the groups\n  .factory('c8yApiService', apiService)\n  .factory('c8yDocs', docsService)\n  .service('c8yPasswordConfirm', passwordService);\n\nangular\n  .module('c8y.ui')\n  .provider('c8yNavigator', c8yNavigatorProvider)\n  .provider('c8yViews', c8yViewsProvider)\n  .directive('c8yUserTotpRevoke', userTotpComponent)\n  .directive('c8yAppLogsAutoRefresh', appLogsAutoRefreshComponent)\n  .directive('c8yImpactProviderSettings', impactProviderSettingsComponent)\n  .directive('c8yDataGrid', dataGridComponent)\n  .factory('c8yTranslate', translateService)\n  .factory('c8yBulkOperationDetailsService', bulkOperationDetailsService)\n  .decorator('gettextCatalog', gettextCatalogDecorator)\n  .factory('c8yServerMessages', serverMessagesService)\n  .factory('ngZone', downgradeInjectable(NgZone));\n\nexport const ng1Modules = ['app', NAME];\n","import { UpgradeModule as NgUpgradeModule } from '@angular/upgrade/static';\nimport { ng1Modules } from './ng1';\n\nexport abstract class HybridAppModule {\n  ng1Modules = ng1Modules;\n  protected upgrade: NgUpgradeModule;\n\n  ngDoBootstrap() {\n    (window as any).bootstrap();\n    this.upgrade.bootstrap(document.getElementById('app'), this.ng1Modules, { strictDi: false });\n  }\n}\n","import { EmptyComponent } from '@c8y/ngx-components';\n\nexport const UPGRADE_ROUTES = [\n  { path: '**', component: EmptyComponent}\n];\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {Ng1ActionBarFactoryService as f} from './action-bar.factory';\nexport {Ng1ActionFactoryService as g} from './action.factory';\nexport {Ng1BreadcrumbFactoryService as h} from './breadcrumb.factory';\nexport {bridgeServiceFactory as a,bridgeServiceProvider as b} from './bridge.service';\nexport {Ng1ComponentFactoryService as o} from './dashboard/component.factory';\nexport {CopyActionComponent as m} from './dashboard/copy-action.component';\nexport {Ng1DashboardActionFactoryService as p} from './dashboard/dashboard-actions.factory';\nexport {dashboardBridgeFactory as c} from './dashboard/dashboard-upgrade.module';\nexport {DeviceSelectorComponent as k} from './dashboard/device-selector.component';\nexport {PasteActionComponent as n} from './dashboard/paste-action.component';\nexport {WidgetComponent as l} from './dashboard/widget.component';\nexport {Ng1DocsFactoryService as j} from './docs.factory';\nexport {Ng1NodesFactoryService as d} from './nodes.factory';\nexport {Ng1SearchFactoryService as i} from './search.factory';\nexport {Ng1TabsFactoryService as e} from './tabs.factory';"],"names":["map","tslib_1.__param","tslib_1.__decorate","angular.bind","tslib_1.__extends","angular.element","angular\n    .module"],"mappings":"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"}